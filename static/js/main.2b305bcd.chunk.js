(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){e.exports={header:"App_header__1OcTw",content:"App_content__2NFRB","route-points-block":"App_route-points-block__13di5"}},24:function(e,t,n){e.exports={point:"Point_point__hpG5b",icon:"Point_icon__3kwkM"}},42:function(e,t,n){e.exports={input:"PointInput_input__1Aqub"}},43:function(e,t,n){e.exports=n.p+"static/media/delete.777b93c6.svg"},50:function(e,t,n){e.exports=n(98)},55:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(40),i=n.n(r),s=(n(55),n(49)),c=n(41),p=n(27),l=n(16),u=n(3),d=n(4),m=n(6),h=n(5),f=n(7),v=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.name,a=t.coords;this.marker=new window.ymaps.Placemark(a,{balloonContent:n},{draggable:!0}),this.marker.events.add("dragend",function(t){e.props.handleMoveMarker(e.props.index,t.get("target").geometry.getCoordinates())}),this.props.map.geoObjects.add(this.marker)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.coords,a=t.name;e.coords[0]===n[0]&&e.coords[1]===n[1]||(this.marker.geometry.setCoordinates(n),this.marker.properties.set({balloonContent:a}))}},{key:"componentWillUnmount",value:function(){var e=this;this.props.map.geoObjects.remove(this.marker),this.marker.events.remove("dragend",function(t){e.props.handleMoveMarker(e.props.index,t.get("target").geometry.getCoordinates())})}},{key:"render",value:function(){return null}}]),t}(o.a.PureComponent),g=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.route=new window.ymaps.Polyline(this.props.data,null,{strokeWidth:3}),this.props.map.geoObjects.add(this.route)}},{key:"componentDidUpdate",value:function(e){var t=this.props.data;if(e.data.length!==t.length)this.route.geometry.setCoordinates(t);else for(var n=0;n<t.length;n++)t[n]!==e.data[n]&&this.route.geometry.setCoordinates(t)}},{key:"componentWillUnmount",value:function(){this.props.map.geoObjects.remove(this.route)}},{key:"render",value:function(){return null}}]),t}(o.a.PureComponent),b=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.ymaps.ready(function(){e.map=new window.ymaps.Map("map",{center:e.props.defaultCenter,zoom:e.props.defaultZoom}),e.map.events.add("actionend",function(){e.props.handleCenterMove(e.map.getCenter())})})}},{key:"render",value:function(){var e=this,t=this.props.points.map(function(t,n){return o.a.createElement(v,{key:n,index:n,coords:t.coords,name:t.name,map:e.map,handleMoveMarker:e.props.handleMoveMarker})}),n=this.props.points.map(function(e){return e.coords});return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{id:"map",style:{width:"50vw",height:"90vh"}}),t,n.length>1&&o.a.createElement(g,{data:n,map:this.map}))}}]),t}(o.a.PureComponent),k=n(42),y=n.n(k),O=function(e){var t=e.handleChange,n=e.handleKeyDown,a=e.value;return o.a.createElement("input",{className:y.a.input,name:"inputValue",onChange:t,onKeyDown:n,value:a})},j=n(10),E=n(43),C=n.n(E),w=n(24),M=n.n(w),D=function(e){var t=e.name,n=e.index,a=e.handleDelete;return o.a.createElement(j.b,{draggableId:t+n,index:n},function(e){return o.a.createElement("div",Object.assign({},e.draggableProps,e.dragHandleProps,{ref:e.innerRef,className:M.a.point}),o.a.createElement("span",null,t),o.a.createElement("img",{className:M.a.icon,src:C.a,alt:"Delete",onClick:a(n)}))})},_=function(e){var t=e.points,n=e.onDragEnd,a=e.handleDelete;return o.a.createElement(j.a,{onDragEnd:n},o.a.createElement(j.c,{droppableId:"points"},function(e){return o.a.createElement("div",Object.assign({ref:e.innerRef},e.droppableProps),t.map(function(e,t){return o.a.createElement(D,{key:t,name:e.name,index:t,handleDelete:a})}),e.placeholder)}))},x=n(20),P=n.n(x),N=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleCenterMove=function(e){n.setState({mapCenter:e})},n.handleChange=function(e){n.setState(Object(l.a)({},e.target.name,e.target.value))},n.handleKeyDown=function(e){13===e.keyCode&&n.setState(function(e){return{points:e.points.concat({name:e.inputValue,coords:e.mapCenter}),inputValue:""}})},n.handleDelete=function(e){return function(){n.setState(function(t){return{points:[].concat(Object(p.a)(t.points.slice(0,e)),Object(p.a)(t.points.slice(e+1)))}})}},n.handleMoveMarker=function(e,t){n.setState(function(n){return{points:n.points.map(function(n,a){return e===a?Object(c.a)({},n,{coords:t}):n})}})},n.onDragEnd=function(e){if(e.destination&&e.destination.index!==e.source.index){var t=n.state.points.slice(),a=t.splice(e.source.index,1),o=Object(s.a)(a,1)[0];t.splice(e.destination.index,0,o),n.setState({points:t})}},n.state={points:[],inputValue:"",mapCenter:[55.76,37.64]},n.cache={},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{className:P.a.header},o.a.createElement("h1",null,"Route Editor")),o.a.createElement("div",{className:P.a.content},o.a.createElement("div",{className:P.a["route-points-block"]},o.a.createElement(O,{handleChange:this.handleChange,handleKeyDown:this.handleKeyDown,value:this.state.inputValue}),o.a.createElement(_,{points:this.state.points,onDragEnd:this.onDragEnd,handleDelete:this.handleDelete})),o.a.createElement(b,{defaultCenter:[55.76,37.64],defaultZoom:9,points:this.state.points,handleMoveMarker:this.handleMoveMarker,handleCenterMove:this.handleCenterMove})))}}]),t}(a.Component);i.a.render(o.a.createElement(N,null),document.getElementById("root"))}},[[50,2,1]]]);
//# sourceMappingURL=main.2b305bcd.chunk.js.map