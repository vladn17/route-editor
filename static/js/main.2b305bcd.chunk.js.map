{"version":3,"sources":["components/App/App.module.css","components/Point/Point.module.css","components/PointInput/PointInput.module.css","components/Point/delete.svg","components/MapMarker/MapMarker.jsx","components/MapRoute/MapRoute.jsx","components/Map/Map.jsx","components/PointInput/PointInput.jsx","components/Point/Point.jsx","components/PointsList/PointsList.jsx","components/App/App.jsx","index.js"],"names":["module","exports","header","content","route-points-block","point","icon","input","__webpack_require__","p","MapMarker","_this","this","_this$props","props","name","coords","marker","window","ymaps","Placemark","balloonContent","draggable","events","add","e","handleMoveMarker","index","get","geometry","getCoordinates","map","geoObjects","prevProps","_this$props2","setCoordinates","properties","set","_this2","remove","React","PureComponent","MapRoute","route","Polyline","data","strokeWidth","length","i","Map","ready","center","defaultCenter","zoom","defaultZoom","handleCenterMove","getCenter","points","react_default","a","createElement","MapMarker_MapMarker","key","routeData","Fragment","id","style","width","height","MapRoute_MapRoute","InputPoint","_ref","handleChange","handleKeyDown","value","className","styles","onChange","onKeyDown","Point","handleDelete","react_beautiful_dnd_esm","draggableId","provided","Object","assign","draggableProps","dragHandleProps","ref","innerRef","src","alt","onClick","PointsList","onDragEnd","droppableId","droppableProps","components_Point_Point","placeholder","App","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","setState","mapCenter","defineProperty","target","keyCode","state","concat","inputValue","toConsumableArray","slice","newcoords","objectSpread","result","destination","source","_points$splice","splice","moved","slicedToArray","cache","PointInput","components_PointsList_PointsList","Map_Map","Component","ReactDOM","render","components_App_App","document","getElementById"],"mappings":"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","file":"static/js/main.2b305bcd.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"App_header__1OcTw\",\"content\":\"App_content__2NFRB\",\"route-points-block\":\"App_route-points-block__13di5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"point\":\"Point_point__hpG5b\",\"icon\":\"Point_icon__3kwkM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"PointInput_input__1Aqub\"};","module.exports = __webpack_public_path__ + \"static/media/delete.777b93c6.svg\";","import React from 'react';\r\n\r\nexport default class MapMarker extends React.PureComponent {\r\n  componentDidMount() {\r\n    const { name, coords } = this.props;\r\n    this.marker = new window.ymaps.Placemark(coords, {\r\n      balloonContent: name,\r\n    }, {\r\n      draggable: true,\r\n    });\r\n    this.marker.events.add('dragend', (e) => {\r\n      this.props.handleMoveMarker(this.props.index, e.get('target').geometry.getCoordinates());\r\n    });\r\n    this.props.map.geoObjects.add(this.marker);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { coords, name } = this.props;\r\n    if(prevProps.coords[0] !== coords[0] || prevProps.coords[1] !== coords[1]){\r\n      this.marker.geometry.setCoordinates(coords);\r\n      this.marker.properties.set({balloonContent: name});\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.map.geoObjects.remove(this.marker);\r\n    this.marker.events.remove('dragend', (e) => {\r\n      this.props.handleMoveMarker(this.props.index, e.get('target').geometry.getCoordinates());\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return null;\r\n  }\r\n\r\n}","import React from 'react';\r\n\r\nexport default class MapRoute extends React.PureComponent {\r\n  componentDidMount() {\r\n    this.route = new window.ymaps.Polyline(this.props.data, null, {\r\n      strokeWidth: 3,\r\n    });\r\n    this.props.map.geoObjects.add(this.route);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { data } = this.props;\r\n    if (prevProps.data.length !== data.length) {\r\n      this.route.geometry.setCoordinates(data);\r\n    }\r\n    else {\r\n      for(let i=0; i<data.length; i++) {\r\n        if (data[i] !== prevProps.data[i]) {\r\n          this.route.geometry.setCoordinates(data);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.map.geoObjects.remove(this.route);\r\n  }\r\n\r\n  render() {\r\n    return null;\r\n  }\r\n}","import React from 'react';\r\nimport MapMarker from \"../MapMarker\";\r\nimport MapRoute from \"../MapRoute\";\r\n\r\nexport default class Map extends React.PureComponent {\r\n  componentDidMount() {\r\n    window.ymaps.ready(() => {\r\n      this.map = new window.ymaps.Map(\"map\", {\r\n        center: this.props.defaultCenter,\r\n        zoom: this.props.defaultZoom,\r\n      });\r\n      this.map.events.add('actionend', () => {\r\n        this.props.handleCenterMove(this.map.getCenter());\r\n      });\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const points  = this.props.points.map((point, index) => (\r\n      <MapMarker key={index} index={index} coords={point.coords} name={point.name} map={this.map} handleMoveMarker={this.props.handleMoveMarker}/>\r\n    ));\r\n    const routeData = this.props.points.map(point => point.coords);\r\n    return (\r\n      <>\r\n        <div id=\"map\" style={{width: '50vw', height: '90vh'}}></div>\r\n        {points}\r\n        {routeData.length > 1 && <MapRoute data={routeData} map={this.map}/>}\r\n      </>\r\n    )\r\n  }\r\n}","import React from 'react'\r\nimport styles from './PointInput.module.css'\r\n\r\nconst InputPoint = ({handleChange, handleKeyDown, value}) => (\r\n  <input className={styles.input} name=\"inputValue\" onChange={handleChange} onKeyDown={handleKeyDown} value={value}/>\r\n);\r\n\r\nexport default InputPoint;","import React from 'react';\r\nimport { Draggable } from 'react-beautiful-dnd';\r\nimport icon from './delete.svg'\r\nimport styles from './Point.module.css'\r\n\r\nconst Point = ({name, index, handleDelete}) => (\r\n  <Draggable draggableId={name+index} index={index}>\r\n    {(provided) => (\r\n      <div {...provided.draggableProps} {...provided.dragHandleProps} ref={provided.innerRef} className={styles.point}>\r\n        <span>{name}</span>\r\n        <img className={styles.icon} src={icon} alt=\"Delete\" onClick={handleDelete(index)}/>\r\n      </div>\r\n    )}\r\n  </Draggable>\r\n);\r\n\r\nexport default Point;","import React from 'react'\r\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd';\r\nimport Point from '../Point'\r\n\r\nconst PointsList = ({points, onDragEnd, handleDelete}) => {\r\n  return (\r\n    <DragDropContext onDragEnd={onDragEnd}>\r\n      <Droppable droppableId=\"points\">\r\n        {(provided) => (\r\n          <div ref={provided.innerRef} {...provided.droppableProps}>\r\n            {points.map((point,index) => <Point key={index} name={point.name} index={index} handleDelete={handleDelete}/>)}\r\n            {provided.placeholder}\r\n          </div>\r\n        )}\r\n      </Droppable>\r\n    </DragDropContext>\r\n  )\r\n};\r\n\r\nexport default PointsList;","import React, { Component } from 'react';\r\nimport Map from '../Map'\r\nimport PointInput from '../PointInput'\r\nimport PointsList from '../PointsList'\r\nimport styles from './App.module.css'\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      points: [],\r\n      inputValue: '',\r\n      mapCenter: [55.76, 37.64],\r\n    };\r\n    this.cache = {};\r\n  }\r\n\r\n  handleCenterMove = (coords) => {\r\n    this.setState({\r\n      mapCenter: coords,\r\n    });\r\n  };\r\n\r\n  handleChange = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  handleKeyDown = (e) => {\r\n    if(e.keyCode === 13) {\r\n      this.setState(state => ({\r\n        points: state.points.concat({name: state.inputValue, coords: state.mapCenter}),\r\n        inputValue: '',\r\n      }));\r\n    }\r\n  };\r\n\r\n  handleDelete = (index) => () => {\r\n    this.setState(state => ({\r\n      points: [...state.points.slice(0, index), ...state.points.slice(index+1)]\r\n    }));\r\n  };\r\n\r\n  handleMoveMarker = (index, newcoords) => {\r\n    this.setState(state => ({\r\n      points: state.points.map((point, i) => index === i ? {...point, coords: newcoords} : point)\r\n    }));\r\n  };\r\n\r\n  onDragEnd = (result) => {\r\n    if (!result.destination) {\r\n      return;\r\n    }\r\n    if (result.destination.index === result.source.index) {\r\n      return;\r\n    }\r\n    const points = this.state.points.slice();\r\n    const [moved] = points.splice(result.source.index, 1);\r\n    points.splice(result.destination.index, 0, moved);\r\n    this.setState({\r\n      points: points,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className={styles.header}>\r\n          <h1>Route Editor</h1>\r\n        </div>\r\n        <div className={styles.content}>\r\n          <div className={styles[\"route-points-block\"]}>\r\n            <PointInput handleChange={this.handleChange} handleKeyDown={this.handleKeyDown} value={this.state.inputValue}/>\r\n            <PointsList points={this.state.points} onDragEnd={this.onDragEnd} handleDelete={this.handleDelete}/>\r\n          </div>\r\n          <Map\r\n            defaultCenter={[55.76, 37.64]}\r\n            defaultZoom={9} points={this.state.points}\r\n            handleMoveMarker={this.handleMoveMarker}\r\n            handleCenterMove={this.handleCenterMove}/>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}