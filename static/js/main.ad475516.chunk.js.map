{"version":3,"sources":["components/App/App.module.css","components/Point/Point.module.css","components/PointInput/PointInput.module.css","components/Point/delete.svg","components/MapMarker/MapMarker.jsx","components/MapRoute/MapRoute.jsx","components/Map/Map.jsx","components/PointInput/PointInput.jsx","components/Point/Point.jsx","components/PointsList/PointsList.jsx","components/App/App.jsx","index.js"],"names":["module","exports","header","content","route-points-block","point","icon","input","__webpack_require__","p","MapMarker","_this","this","_this$props","props","name","coords","marker","window","ymaps","Placemark","balloonContent","draggable","events","add","e","handleMoveMarker","index","get","geometry","getCoordinates","map","geoObjects","setCenter","prevProps","_this$props2","setCoordinates","properties","set","_this2","remove","React","PureComponent","MapRoute","route","Polyline","data","strokeWidth","length","i","Map","ready","center","zoom","points","react_default","a","createElement","MapMarker_MapMarker","key","routeData","Fragment","id","style","width","height","MapRoute_MapRoute","InputPoint","_ref","handleChange","handleKeyDown","value","className","styles","onChange","onKeyDown","Point","handleDelete","react_beautiful_dnd_esm","draggableId","provided","Object","assign","draggableProps","dragHandleProps","ref","innerRef","src","alt","onClick","PointsList","onDragEnd","droppableId","droppableProps","components_Point_Point","placeholder","App","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","setState","defineProperty","target","keyCode","cache","state","inputValue","concat","geocode","results","then","res","catch","error","console","log","toConsumableArray","slice","newcoords","result","destination","source","_points$splice","splice","moved","slicedToArray","PointInput","components_PointsList_PointsList","Map_Map","Component","ReactDOM","render","components_App_App","document","getElementById"],"mappings":"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","file":"static/js/main.ad475516.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"App_header__1OcTw\",\"content\":\"App_content__2NFRB\",\"route-points-block\":\"App_route-points-block__13di5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"point\":\"Point_point__hpG5b\",\"icon\":\"Point_icon__3kwkM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"PointInput_input__1Aqub\"};","module.exports = __webpack_public_path__ + \"static/media/delete.777b93c6.svg\";","import React from 'react';\r\n\r\nexport default class MapMarker extends React.PureComponent {\r\n  componentDidMount() {\r\n    const { name, coords } = this.props;\r\n    this.marker = new window.ymaps.Placemark(coords, {\r\n      balloonContent: name,\r\n    }, {\r\n      draggable: true,\r\n    });\r\n    this.marker.events.add('dragend', (e) => {\r\n      this.props.handleMoveMarker(this.props.index, e.get('target').geometry.getCoordinates());\r\n    });\r\n    this.props.map.geoObjects.add(this.marker);\r\n    this.props.map.setCenter(coords);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { coords, name } = this.props;\r\n    if(prevProps.coords[0] !== coords[0] || prevProps.coords[1] !== coords[1]){\r\n      this.marker.geometry.setCoordinates(coords);\r\n      this.marker.properties.set({balloonContent: name});\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.map.geoObjects.remove(this.marker);\r\n    this.marker.events.remove('dragend', (e) => {\r\n      this.props.handleMoveMarker(this.props.index, e.get('target').geometry.getCoordinates());\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return null;\r\n  }\r\n\r\n\r\n}","import React from 'react';\r\n\r\nexport default class MapRoute extends React.PureComponent {\r\n  componentDidMount() {\r\n    this.route = new window.ymaps.Polyline(this.props.data, null, {\r\n      strokeWidth: 3,\r\n    });\r\n    this.props.map.geoObjects.add(this.route);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { data } = this.props;\r\n    if (prevProps.data.length !== data.length) {\r\n      this.route.geometry.setCoordinates(data);\r\n    }\r\n    else {\r\n      for(let i=0; i<data.length; i++) {\r\n        if (data[i] !== prevProps.data[i]) {\r\n          this.route.geometry.setCoordinates(data);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.map.geoObjects.remove(this.route);\r\n  }\r\n\r\n  render() {\r\n    return null;\r\n  }\r\n}","import React from 'react';\r\nimport MapMarker from \"../MapMarker\";\r\nimport MapRoute from \"../MapRoute\";\r\n\r\nexport default class Map extends React.PureComponent {\r\n  componentDidMount() {\r\n    window.ymaps.ready(() => {\r\n      this.map = new window.ymaps.Map(\"map\", {\r\n        center: [55.76, 37.64],\r\n        zoom: 9,\r\n      });\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const points  = this.props.points.map((point, index) => {\r\n      return <MapMarker key={index} index={index} coords={point.coords}\r\n                        name={point.name} map={this.map}\r\n                        handleMoveMarker={this.props.handleMoveMarker}/>\r\n    });\r\n    const routeData = this.props.points.map(point => point.coords);\r\n    return (\r\n      <>\r\n        <div id=\"map\" style={{width: '50vw', height: '90vh'}}></div>\r\n        {points}\r\n        {routeData.length > 1 && <MapRoute data={routeData} map={this.map}/>}\r\n      </>\r\n    )\r\n  }\r\n}","import React from 'react'\r\nimport styles from './PointInput.module.css'\r\n\r\nconst InputPoint = ({handleChange, handleKeyDown, value}) => (\r\n  <input className={styles.input} name=\"inputValue\" onChange={handleChange} onKeyDown={handleKeyDown} value={value}/>\r\n);\r\n\r\nexport default InputPoint;","import React from 'react';\r\nimport { Draggable } from 'react-beautiful-dnd';\r\nimport icon from './delete.svg'\r\nimport styles from './Point.module.css'\r\n\r\nconst Point = ({name, index, handleDelete}) => (\r\n  <Draggable draggableId={name+index} index={index}>\r\n    {(provided) => (\r\n      <div {...provided.draggableProps} {...provided.dragHandleProps} ref={provided.innerRef} className={styles.point}>\r\n        <span>{name}</span>\r\n        <img className={styles.icon} src={icon} alt=\"Delete\" onClick={handleDelete(index)}/>\r\n      </div>\r\n    )}\r\n  </Draggable>\r\n);\r\n\r\nexport default Point;","import React from 'react'\r\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd';\r\nimport Point from '../Point'\r\n\r\nconst PointsList = ({points, onDragEnd, handleDelete}) => {\r\n  return (\r\n    <DragDropContext onDragEnd={onDragEnd}>\r\n      <Droppable droppableId=\"points\">\r\n        {(provided) => (\r\n          <div ref={provided.innerRef} {...provided.droppableProps}>\r\n            {points.map((point,index) => <Point key={index} name={point.name} index={index} handleDelete={handleDelete}/>)}\r\n            {provided.placeholder}\r\n          </div>\r\n        )}\r\n      </Droppable>\r\n    </DragDropContext>\r\n  )\r\n};\r\n\r\nexport default PointsList;","import React, { Component } from 'react';\r\nimport Map from '../Map'\r\nimport PointInput from '../PointInput'\r\nimport PointsList from '../PointsList'\r\nimport styles from './App.module.css'\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      points: [],\r\n      inputValue: '',\r\n    };\r\n    this.cache = {};\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  handleKeyDown = (e) => {\r\n    if(e.keyCode === 13) {\r\n\r\n      if(this.cache[this.state.inputValue]) {\r\n        this.setState(state => ({\r\n          points: state.points.concat({name: this.state.inputValue, coords: this.cache[this.state.inputValue]}),\r\n          inputValue: '',\r\n        }));\r\n        return;\r\n      }\r\n\r\n      window.ymaps.geocode(this.state.inputValue, { results: 1})\r\n        .then(res => {\r\n          const geoObject = res.geoObjects.get(0);\r\n          const coords = geoObject.geometry.getCoordinates();\r\n          this.cache[this.state.inputValue] = coords;\r\n          this.setState(state => ({\r\n            points: state.points.concat({name: this.state.inputValue, coords}),\r\n            inputValue: '',\r\n          }));\r\n        })\r\n        .catch(error => console.log(error));\r\n    }\r\n  };\r\n\r\n  handleDelete = (index) => () => {\r\n    this.setState(state => ({\r\n      points: [...state.points.slice(0, index), ...state.points.slice(index+1)]\r\n    }))\r\n  };\r\n\r\n  handleMoveMarker = (index, newcoords) => {\r\n    window.ymaps.geocode(newcoords, { results: 1})\r\n      .then(res => {\r\n        const geoObject = res.geoObjects.get(0);\r\n        const name = geoObject.properties.get('text');\r\n        this.setState(state => ({\r\n          points: state.points.map((point, i) => index === i ? {name: name, coords: newcoords} : point)\r\n        }))\r\n      })\r\n      .catch(error => console.log(error));\r\n  };\r\n\r\n  onDragEnd = (result) => {\r\n    if (!result.destination) {\r\n      return;\r\n    }\r\n    if (result.destination.index === result.source.index) {\r\n      return;\r\n    }\r\n    const points = this.state.points.slice();\r\n    const [moved] = points.splice(result.source.index, 1);\r\n    points.splice(result.destination.index, 0, moved);\r\n    this.setState({\r\n      points: points,\r\n    })\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className={styles.header}>\r\n          <h1>Route Editor</h1>\r\n        </div>\r\n        <div className={styles.content}>\r\n          <div className={styles[\"route-points-block\"]}>\r\n            <PointInput handleChange={this.handleChange} handleKeyDown={this.handleKeyDown} value={this.state.inputValue}/>\r\n            <PointsList points={this.state.points} onDragEnd={this.onDragEnd} handleDelete={this.handleDelete}/>\r\n          </div>\r\n          <Map points={this.state.points} handleMoveMarker={this.handleMoveMarker}/>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}